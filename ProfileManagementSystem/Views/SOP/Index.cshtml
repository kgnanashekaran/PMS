
@{
    ViewBag.Title = "Himatsingka - Profile Management System";
    //Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<script src="~/Scripts/jquery.js"></script>
<div class="container">
    <form id="form-input" class="form-horizontal">
        @Html.AntiForgeryToken()
        <br>
        <br>
        <div class="form-group">
            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="txtFirstName">
                Name <span class="required" style="color: red;">*</span>
            </label>
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                <input type="text" id="txtFirstName" maxlength="100" class="form-control col-md-7 col-xs-12">
            </div>
        </div>
        <br>
        <div class="form-group row">
            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="idUpload">
                Picture <span style="color: red;">*</span>
            </label>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <input type="file" id="idUpload" maxlength="100" class="form-control col-md-7 col-xs-12">
            </div>
        </div>
        <br>
        <div class="form-group row">
            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="IsActive">
                Active <span style="color: red;">*</span>
            </label>
            <div class="col-md-4 col-sm-4 col-xs-12">
                <select id="IsActive" class="form-control m-b"><option value="Yes">Yes</option><option value="No">No</option></select>
            </div>
        </div>
        <br>
        <div class="ln_solid"></div>
        <div class="form-group row">
            <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-4">
                <button type="submit" id="btnSaveSOP" class="btn btn-primary">Save</button>
                <button type="submit" id="btnUpdateSOP" onclick="UpdateSOP(); return false;" class="btn btn-primary" style="display:none">Update</button>
            </div>
        </div>
        <div class="ln_solid"></div>
    </form>
</div>
<script>
    $("#idUpload").change(function () {
        var data = new FormData();
        var files = $("#idUpload").get(0).files;
        if (files.length > 0) {
            $("#txtFirstName").val(files[0].name);
        }
    });
    $("#btnSaveSOP").click(function () {
        var data = new FormData();
        var files = $("#idUpload").get(0).files;
        if (files.length > 0) {
            data.append("MyImages", files[0]);
            data.append("Name", $("#txtFirstName").val());
            data.append("IsActive", $('#IsActive option:selected').text());
            //alert(files[0].name)
            $.ajax({
                url: "/SOP/UploadFiles",
                type: "POST",
                processData: false,
                contentType: false,
                data: data,
                success: function (response) {
                    alert();
                    //code after success
                    //$("#txtImg").val(response);
                    //$("#imgPreview").attr('src', '/Upload/' + response);
                },
                error: function (er) {
                    alert(er);
                }
            });
        }
    });
</script>
